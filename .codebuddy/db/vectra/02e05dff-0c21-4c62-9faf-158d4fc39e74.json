{"chunk":0,"numChunks":1,"fileHash":"h84kNrnuAck/B8k6RnTLbjYKhMDTGg6baojyA8TIp8w=","filePath":"frontend/src/shared/actions.js","content":"import axios from 'axios'\nimport decodeJWT from 'jwt-decode'\nimport { push } from 'connected-react-router'\nimport { DOWNLOAD_TOKEN_PATH } from '../utils'\nexport const LOGIN_USER = 'LOGIN_USER'\nexport const LOGOUT_USER = 'LOGOUT_USER'\nexport const SWITCH_TO_JUDGE = 'SWITCH_TO_JUDGE'\nexport const SWITCH_TO_ADMIN = 'SWITCH_TO_ADMIN'\nexport const GET_DOWNLOAD_TOKEN = 'GET_DOWNLOAD_TOKEN'\nexport const DISPLAY_ERROR = 'DISPLAY_ERROR'\nexport const DISMISS_ERROR = 'DISMISS_ERROR'\nexport const SET_USER_HOMETOWN = 'SET_USER_HOMETOWN'\nexport const SET_USER_DISPLAY_NAME = 'SET_USER_DISPLAY_NAME'\nexport const shouldLogin = () => {\n  return !!window.localStorage.getItem('_token_v1')\n}\nexport const login = () => (dispatch, getState, client) => {\n  const token = window.localStorage.getItem('_token_v1')\n  const user = decodeJWT(token)\n  dispatch({\n    type: LOGIN_USER,\n    payload: {\n      user,\n      token\n    }\n  })\n}\nexport const logout = () => (dispatch, getState, client) => {\n  dispatch({\n    type: LOGOUT_USER\n  })\n  window.localStorage.removeItem('_token_v1')\n  dispatch(push('/'))\n}\nexport const switchToJudge = () => (dispatch, getState, client) => {\n  dispatch({\n    type: SWITCH_TO_JUDGE\n  })\n}\nexport const switchToAdmin = () => (dispatch, getState, client) => {\n  dispatch({\n    type: SWITCH_TO_ADMIN\n  })\n}"}