{"chunk":0,"numChunks":5,"fileHash":"cWvoqHYwuGtipLnIZtCfp761H+eBYWHJZUhvVs+lyqI=","filePath":"deploy/deploy.sh","content":"#! /bin/bash\n##################################################\n#                                                #\n#    This script will deploy Gallery Gateway.    #\n#    It is intended to be run on Ubuntu 16.04.   #\n#                                                #\n##################################################\nNODE_USER='www-data';\nSCRIPT_ROOT=`pwd`;\nDEFAULT_URL=https://github.com/abstractionhq/gallery-gateway/archive/master.zip\nif [ $# -gt 0 ];\nthen\n    GIT_URL=$1 \nelse\n    GIT_URL=DEFAULT_URL\nfi\nset -e;\n#\n# Sanity check for important binaries and files\n#\ncommand -v node >/dev/null 2>&1 || { echo >&2 \"This script requires node but it's not installed.  Aborting.\"; exit 1; }\ncommand -v yarn >/dev/null 2>&1 || { echo >&2 \"This script requires yarn but it's not installed.  Aborting.\"; exit 1; }\ncommand -v npm >/dev/null 2>&1 || { echo >&2 \"This script requires npm but it's not installed.  Aborting.\"; exit 1; }\ncommand -v wget >/dev/null 2>&1 || { echo >&2 \"This script requires wget but it's not installed.  Aborting.\"; exit 1; }\ncommand -v supervisord >/dev/null 2>&1 || { echo >&2 \"This script requires supervisor but it's not installed.  Aborting.\"; exit 1; }\nif [ ! -f mysql_password.txt ] ; then\n        echo \"Could not find mysql_password.txt. Aborting.\" >&2; exit 1;\nfi\n#\n# Create the database (if needed)\n#\nsudo mysql << ENDMYSQL\nCREATE DATABASE IF NOT EXISTS gallerygateway;\nALTER DATABASE gallerygateway CHARACTER SET = utf8mb4 COLLATE = utf8mb4_unicode_ci;\nGRANT ALL ON gallerygateway.* TO 'gallerygateway';\nENDMYSQL\n#\n# Download Gallery Gateway from GitHub\n#\nDEST"}