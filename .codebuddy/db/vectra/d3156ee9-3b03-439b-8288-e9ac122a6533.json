{"chunk":0,"numChunks":1,"fileHash":"dbBvntihvUxQ/vOGVFh1HTMleFvt/p2508dAIdD9Y3c=","filePath":"backend/models/user.js","content":"import Group from './group'\nimport DataTypes from 'sequelize'\nimport sequelize from '../config/sequelize'\nimport { STUDENT, ADMIN, JUDGE } from '../constants'\nimport Entry from './entry'\nimport Portfolio from './portfolio'\nconst User = sequelize.define('user', {\n  username: {\n    type: DataTypes.STRING,\n    allowNull: false,\n    notEmpty: true,\n    primaryKey: true // RIT usernames are unique between individuals and cannot be changed\n  },\n  firstName: {\n    type: DataTypes.STRING,\n    allowNull: false,\n    notEmpty: true\n  },\n  lastName: {\n    type: DataTypes.STRING,\n    allowNull: false,\n    notEmpty: true\n  },\n  hometown: {\n    type: DataTypes.STRING,\n    allowNull: true\n  },\n  displayName: {\n    type: DataTypes.STRING,\n    allowNull: true\n  },\n  type: {\n    type: DataTypes.ENUM(STUDENT, ADMIN, JUDGE),\n    allowNull: false,\n    notEmpty: true\n  }\n})\nUser.prototype.getGroups = function getGroups () {\n  if (this.type !== STUDENT) {\n    return Promise.resolve([])\n  }\n  // Find all groups where the creator is this user\n  return Group.findAll({ where: { creatorUsername: this.username } })\n}"}