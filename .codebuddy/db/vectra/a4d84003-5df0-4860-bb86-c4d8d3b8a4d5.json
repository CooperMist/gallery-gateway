{"chunk":14,"numChunks":27,"fileHash":"nTZOypT/nEM5cNuamEG+wsQ/tKipVKAjaQgt5wY72EQ=","filePath":"backend/test/resolvers/show.js","content":"/* eslint-disable no-unused-expressions */\ndescribe('Show Resolvers', function () {\n  describe('Delete a show', () => {\n    it('does not let non-admins remove a show', () =>\n      fakeShow()\n        .then(show =>\n          execGraphql(`\n            mutation {\n              deleteShow(id: ${show.id})\n            }\n          `,\n          { type: 'STUDENT' }\n          )\n            .then(result => {\n              expect(result.errors).to.be.length(1)\n            })\n            .then(() =>\n              // expect nothing to have been deleted\n              Show.count().then(numShows => {\n                expect(numShows).to.eq(1)\n              })\n            )\n        )\n    )\n    it('removes a simple show', () =>\n      fakeShow()\n        .then(show =>\n          execGraphql(`\n            mutation {\n              deleteShow(id: ${show.id})\n            }\n          `,\n          { type: 'ADMIN' }\n          )\n            .then(() => {\n              // ensure no shows exist in the db\n              return Show.count().then(numShows => {\n                expect(numShows).to.eq(0)\n              })\n            })\n        )\n    )"}