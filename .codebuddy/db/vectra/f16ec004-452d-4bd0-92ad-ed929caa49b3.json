{"chunk":8,"numChunks":9,"fileHash":"YOuAqeDV8U74YnQ9wIMRlEJcJQERugrUkolbfgwnXMM=","filePath":"backend/test/routes/zipDownload.js","content":"/* eslint-disable no-unused-expressions */\ndescribe('downloading a zip file', () => {\n  it('creates non-invited folder for submissions correctly', (done) => {\n    Promise.all([fakeShow({name: 'Honors Show'}), fakeUser()])\n    .then(([show, user]) =>\n      Promise.all([\n        fakeImageEntry({title: 'Untitled', path: 'imageA.jpg', invited: true, user, show}),\n        fakeImageEntry({title: 'Titled', path: 'imageB.jpg', invited: false, user, show})\n      ]).then(([entry1, entry2]) => {\n        var files = [];\n          request(server)\n            .get(`/zips/${entry1.showId}?token=${token}`)\n            .buffer().pipe(tar.t()).on('entry', entry => {\n                files.push(entry.path)\n            })\n            setTimeout(()=>{\n              expect(files.length).to.eq(2, 'Files Present: ' + files.length + '\\nshould have two files')\n              expect(files).to.include(`${show.name}/Invited/${user.lastName}, ${user.firstName} - Untitled.jpg`\n              , 'Files Present: ' + files + `\\nshould contain file:\\n ${show.name}/Invited/${user.lastName}, ${user.firstName} - Untitled.jpg\\n`)\n              expect(files).to.include(`${show.name}/Not Invited/${user.lastName}, ${user.firstName} - Titled.jpg`\n              , 'Files Present: ' + files + `\\nshould contain file:\\n ${show.name}/Not Invited/${user.lastName}, ${user.firstName} - Titled.jpg\\n`)\n              done()\n            }, 500)\n          })\n      )\n        })"}