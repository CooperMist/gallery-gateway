{"chunk":2,"numChunks":16,"fileHash":"mR9DC30NCZm4fUVCJ9XPA6RwzxRgaCcAIbkeTRtJq/A=","filePath":"frontend/src/Admin/pages/PrintableReport.js","content":"import React, { Fragment, Component } from 'react'\nclass PrintableReport extends Component {\n  static propTypes = {\n    show: PropTypes.shape({\n      name: PropTypes.string,\n      displayEntries: PropTypes.arrayOf({\n        id: PropTypes.number,\n        title: PropTypes.string,\n        comment: PropTypes.string,\n        entryType: PropTypes.string,\n        invited: PropTypes.bool,\n        forSale: PropTypes.bool,\n        moreCopies: PropTypes.bool,\n        excludeFromJudging: PropTypes.bool,\n        student: PropTypes.shape({\n          firstName: PropTypes.string,\n          lastName: PropTypes.string,\n          username: PropTypes.string\n        }),\n        group: PropTypes.shape({\n          id: PropTypes.number,\n          participants: PropTypes.string\n        }),\n        provider: PropTypes.string,\n        videoId: PropTypes.string,\n        horizDimInch: PropTypes.number,\n        vertDimInch: PropTypes.number,\n        mediaType: PropTypes.string,\n        path: PropTypes.string\n      })\n    }).isRequired,\n    loading: PropTypes.bool\n  }\n  static defaultProps = {\n    show: {}\n  }\n  state = {\n    allImagesLoaded: false,\n    printTriggered: false\n  }\n  loadedImagePaths = new Set()\n  onImageLoaded (path) {\n    // Trigger print after all images have been loaded\n    this.loadedImagePaths.add(path)\n\n    const entriesWithImage = this.props.displayEntries.filter(\n      e => e.path && e.path.endsWith('.jpg')\n    )\n    const allPaths = entriesWithImage.map(e => e.path)\n\n    // If all paths are now loaded, we are ready to print\n    if (allPaths.every(path => this.loadedImagePaths.has(path))) {\n      this.setState({ allImagesLoaded: true }, () => {\n        if (!this.state.printTriggered) { // only print if not triggered\n          this.setState({ printTriggered: true });\n          setTimeout(window.print, 1000);\n        }\n      });\n    }\n  }"}