{"chunk":0,"numChunks":1,"fileHash":"LedH6HvT7qxwkusR4x30xooZ2RgVE+ctZFp3pX7NwyY=","filePath":"backend/models/portfolioPeriod.js","content":"import DataTypes from 'sequelize'\r\nimport sequelize from '../config/sequelize'\r\nimport PortfolioPeriodJudge from './portfolioPeriodJudge'\r\nimport Portfolio from './portfolio'\r\nimport User from './user'\r\n\r\nconst PortfolioPeriod = sequelize.define('portfolioPeriod', {\r\n    name: {\r\n        type: DataTypes.STRING,\r\n        allowNull: true\r\n    },\r\n    description: {\r\n        type: DataTypes.STRING,\r\n        allowNull: true\r\n    },\r\n    // Start and end dates for the period's submission period\r\n    startDate: {\r\n        type: DataTypes.DATE,\r\n        allowNull: false,\r\n        notEmpty: true\r\n    },\r\n    endDate: {\r\n        type: DataTypes.DATE,\r\n        allowNull: false,\r\n        notEmpty: true\r\n    },\r\n\r\n    // Start and end dates for the period's judging period\r\n    judgingStartDate: {\r\n        type: DataTypes.DATE,\r\n        allowNull: false,\r\n        notEmpty: true\r\n    },\r\n    judgingEndDate: {\r\n        type: DataTypes.DATE,\r\n        allowNull: false,\r\n        notEmpty: true\r\n    }\r\n})\r\n\r\nPortfolioPeriod.prototype.getPortfolios = function getPortfolios() {\r\n    return Portfolio.findAll({ where: { portfolioPeriodId: this.id } })\r\n}\r\n\r\nPortfolioPeriod.prototype.getJudges = async function getJudges() {\r\n    // Find all portfolio period judge models with this portfolio period id \r\n    const portfolio_period_judges = await PortfolioPeriodJudge.findAll({ where: { portfolioPeriodId: this.id } })\r\n    // Grab the judge user object from the database\r\n    const judges = await portfolio_period_judges.map(async (judge) => await User.findOne({ where: { username: judge.judgeUsername } }))\r\n    return judges\r\n\r\n}\r\n\r\nexport default PortfolioPeriod"}