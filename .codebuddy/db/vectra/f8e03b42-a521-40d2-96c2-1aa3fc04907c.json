{"chunk":0,"numChunks":1,"fileHash":"TPz01N9ZiIjdrvELOdn762Vi6Ba5K92vUSfZ9qzbn5c=","filePath":"frontend/src/Admin/containers/ShowDetailsTab.js","content":"import { graphql } from 'react-apollo'\r\nimport { connect } from 'react-redux'\r\nimport { compose } from 'recompose'\r\nimport { push } from 'connected-react-router'\r\n\r\nimport { getDownloadToken } from '../../shared/actions'\r\nimport { downloadCsv, downloadShowZip } from '../actions'\r\nimport ShowDetailsTab from '../components/ShowDetailsTab'\r\n\r\nimport DeleteShow from '../mutations/deleteShow.graphql'\r\nimport ShowsQuery from '../queries/shows.graphql'\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n  downloadZip: () =>\r\n    dispatch(getDownloadToken()).then(() =>\r\n      dispatch(downloadShowZip(ownProps.show.id))\r\n    ),\r\n  downloadCsv: () =>\r\n    dispatch(getDownloadToken()).then(() =>\r\n      dispatch(downloadCsv(ownProps.show.id))\r\n    ),\r\n  doneDeleteShow: () => dispatch(push('/'))\r\n})\r\n\r\nexport default compose(\r\n  connect(null, mapDispatchToProps),\r\n  graphql(DeleteShow, {\r\n    props: ({ mutate, ownProps }) => ({\r\n      deleteShow: () =>\r\n        mutate({\r\n          variables: {\r\n            id: ownProps.show.id\r\n          }\r\n        })\r\n    }),\r\n    options: () => ({\r\n      refetchQueries: [\r\n        {\r\n          query: ShowsQuery\r\n        }\r\n      ]\r\n    })\r\n  })\r\n)(ShowDetailsTab)\r\n"}