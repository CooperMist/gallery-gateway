{"chunk":0,"numChunks":1,"fileHash":"WUa+PMUWWZozWO6PxneoH4UiEZB4Q09/PedHislNhOc=","filePath":"frontend/src/Student/actions.js","content":"import axios from 'axios'\nimport pdf from 'assets/pdf.svg'\nimport { IMAGE_UPLOAD_PATH, PDF_UPLOAD_PATH } from '../utils'\nimport { displayError } from '../shared/actions'\nexport const UPLOAD_IMAGE = 'UPLOAD_IMAGE'\nexport const UPLOAD_PDF = 'UPLOAD_PDF'\nexport const CLEAR_PREVIEW = 'CLEAR_PREVIEW'\nexport const uploadImage = file => (dispatch, getState, client) => {\n  // Endpoint expects 'multipart/form-data' w/ key 'image'\n  const formData = new FormData()\n  formData.append('image', file)\n\n  return axios\n    .post(IMAGE_UPLOAD_PATH, formData, {\n      headers: { Authorization: `Bearer ${getState().shared.auth.token}` }\n    })\n    .then(({ data }) =>{\n      dispatch({\n        type: UPLOAD_IMAGE,\n        payload: {\n          path: data.path,\n          name: file.name,\n          preview: URL.createObjectURL(file)\n        }\n      })\n      return data\n    }\n    )\n    .catch(err => {\n      let message\n      if (err.response.status === 413) {\n        message = 'That file is too large. Files must be smaller than 50MB.'\n      } else {\n        message = err.message\n      }\n\n      dispatch(displayError(message))\n    })\n}"}