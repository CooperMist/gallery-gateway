{"chunk":9,"numChunks":27,"fileHash":"nTZOypT/nEM5cNuamEG+wsQ/tKipVKAjaQgt5wY72EQ=","filePath":"backend/test/resolvers/show.js","content":"/* eslint-disable no-unused-expressions */\ndescribe('Show Resolvers', function () {\n  describe('Update a show', function () {\n    it('Does not allow non-admins', function () {\n      expect(() =>\n        updateShow('', {}, {auth: {type: 'STUDENT', username: 'billy'}})\n      ).to.throw(/Permission Denied/)\n    })\n    it('Updates a show', function (done) {\n      fakeShow().then(show => {\n          const input = { id: show.id, input: {\n            name: 'Updated Test Show',\n            description: 'Coolest-er of shows',\n            entryCap: 3,\n            entryStart: '2015-01-01',\n            entryEnd: '2015-01-02',\n            judgingStart: '2015-01-03',\n            judgingEnd: '2015-01-04'\n        }}\n        updateShow('', input, {auth: {type: 'ADMIN'}})\n          .then((show) => {\n            expect(show.name).to.eq('Updated Test Show')\n            expect(show.entryEnd.getFullYear()).to.eq(2015)\n            done()\n          })}\n      )\n    })\n    it('Validates entry/judging start/end dates', function (done) {\n      fakeShow().then(show => {\n      const input = { id: show.id, input: {\n        name: 'Bad Show',\n        entryCap: 11,\n        entryStart: '2015-01-05',\n        entryEnd: '2015-01-04',\n        judgingStart: '2015-01-06',\n        judgingEnd: '2015-01-07'\n      }}\n      updateShow('', input, {auth: {type: 'ADMIN'}})\n        .catch((err) => {\n          expect(err).to.exist\n          expect(err.message).to.equal('Validation error: Entry start date must be before the entry end date')\n          done"}