{"chunk":20,"numChunks":51,"fileHash":"a+FASeiRPRDZBZ0S/9mF+yVl99YVRCx6NJRkd9d3q0M=","filePath":"backend/routes/download.js","content":"import fs from 'fs'\nrouter.route('/csv/:showId')\n  .get(ensureAdminDownloadToken, (req, res, next) => {\n    Show.findByPk(req.params.showId, { rejectOnEmpty: true })\n      .then(show => {\n        Entry.findAll({ where: { showId: req.params.showId } })\n          .then(entries => {\n            return Promise.all([\n              Image.findAll({ where: { id: { $in: imageIds } } }),\n              Video.findAll({ where: { id: { $in: videoIds } } }),\n              OtherMedia.findAll({ where: { id: { $in: otherMediaIds } } }),\n              submissionsWithSubmittersPromise(entries)\n            ])\n              .then(([images, videos, otherMedia, submissionsWithSubmitters]) => {"}